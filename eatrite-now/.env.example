# EatRite Corporate Wellness Platform - Environment Configuration
# SECURITY: Never commit actual values. Create .env file locally with production credentials.

# ============================================================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================================================
# CRITICAL: Use least-privilege database user with ONLY required permissions
# DO NOT use 'postgres' superuser or admin accounts in any environment
# Required permissions: SELECT, INSERT, UPDATE, DELETE on application schema only

DATABASE_URL="postgresql://eatrite_app_user:PASSWORD@localhost:5432/eatrite_production?schema=public"

# For local development:
# DATABASE_URL="postgresql://postgres:postgres@localhost:5432/eatrite_dev?schema=public"

# For cloud PostgreSQL (e.g., Supabase, Neon, AWS RDS):
# DATABASE_URL="postgresql://user:password@host.region.provider.com:5432/database?schema=public"

# ============================================================================
# APPLICATION SECURITY
# ============================================================================
JWT_SECRET=                 # Generate with: openssl rand -base64 64
JWT_EXPIRY=8h              # Token lifetime (production: 1h-8h recommended)
REFRESH_TOKEN_SECRET=      # Generate with: openssl rand -base64 64
REFRESH_TOKEN_EXPIRY=7d    # Refresh token lifetime

# Password Requirements
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_SPECIAL=true
PASSWORD_REQUIRE_NUMBERS=true
PASSWORD_REQUIRE_UPPERCASE=true

# ============================================================================
# STRIPE PAYMENT PROCESSING
# ============================================================================
STRIPE_SECRET_KEY=         # sk_live_... for production, sk_test_... for development
STRIPE_PUBLISHABLE_KEY=    # pk_live_... for production, pk_test_... for development
STRIPE_WEBHOOK_SECRET=     # whsec_... from Stripe Dashboard

# ============================================================================
# EMAIL CONFIGURATION (Transactional)
# ============================================================================
EMAIL_SERVICE=smtp         # Options: smtp, sendgrid, ses
EMAIL_HOST=                # SMTP host (e.g., smtp.sendgrid.net)
EMAIL_PORT=587
EMAIL_USER=                # SMTP username
EMAIL_PASSWORD=            # SMTP password or API key
EMAIL_FROM=noreply@eatritecorporate.com
EMAIL_FROM_NAME=EatRite Corporate

# ============================================================================
# SMS CONFIGURATION (OTP/Notifications)
# ============================================================================
SMS_SERVICE=twilio         # Options: twilio, aws-sns
TWILIO_ACCOUNT_SID=        # From Twilio console
TWILIO_AUTH_TOKEN=         # From Twilio console
TWILIO_PHONE_NUMBER=       # Your Twilio phone number

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================
NODE_ENV=production        # Options: development, production
PORT=4005                  # Backend API port
FRONTEND_URL=https://app.eatritecorporate.com
API_URL=https://api.eatritecorporate.com

# CORS Configuration
CORS_ORIGIN=https://app.eatritecorporate.com  # Exact origin(s), comma-separated for multiple

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000    # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100    # Max requests per window

# ============================================================================
# LOGGING & MONITORING
# ============================================================================
LOG_LEVEL=info             # Options: error, warn, info, debug
AUDIT_LOG_RETENTION_DAYS=2555  # 7 years for financial compliance

# Optional: External monitoring
SENTRY_DSN=                # For error tracking
DATADOG_API_KEY=           # For application monitoring

# ============================================================================
# SESSION MANAGEMENT
# ============================================================================
SESSION_SECRET=            # Generate with: openssl rand -base64 64
SESSION_MAX_AGE=28800000   # 8 hours in milliseconds

# ============================================================================
# FEATURE FLAGS (Enterprise)
# ============================================================================
ENABLE_BULK_ORDERING=true
ENABLE_INVOICE_AUTO_GENERATION=true
ENABLE_PAYMENT_AUTOPAY=false       # Disabled by default for security
ENABLE_USAGE_ANALYTICS=true
ENABLE_AUDIT_LOGGING=true          # Never disable in production

# ============================================================================
# DEVELOPMENT ONLY (Remove in production)
# ============================================================================
# DEBUG_SQL=false                  # Log all SQL queries
# SKIP_EMAIL_VERIFICATION=false    # Bypass email verification
# MOCK_STRIPE_PAYMENTS=false       # Use Stripe test mode
